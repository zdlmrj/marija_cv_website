{"ast":null,"code":"/*!\n * FilePondPluginImageExifOrientation 1.0.11\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() : typeof define === 'function' && define.amd ? define(factory) : (global = global || self, global.FilePondPluginImageExifOrientation = factory());\n})(this, function () {\n  'use strict';\n\n  // test if file is of type image\n  var isJPEG = function isJPEG(file) {\n    return /^image\\/jpeg/.test(file.type);\n  };\n  var Marker = {\n    JPEG: 0xffd8,\n    APP1: 0xffe1,\n    EXIF: 0x45786966,\n    TIFF: 0x4949,\n    Orientation: 0x0112,\n    Unknown: 0xff00\n  };\n  var getUint16 = function getUint16(view, offset) {\n    var little = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    return view.getUint16(offset, little);\n  };\n  var getUint32 = function getUint32(view, offset) {\n    var little = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    return view.getUint32(offset, little);\n  };\n  var getImageOrientation = function getImageOrientation(file) {\n    return new Promise(function (resolve, reject) {\n      var reader = new FileReader();\n      reader.onload = function (e) {\n        var view = new DataView(e.target.result);\n\n        // Every JPEG file starts from binary value '0xFFD8'\n        if (getUint16(view, 0) !== Marker.JPEG) {\n          // This aint no JPEG\n          resolve(-1);\n          return;\n        }\n        var length = view.byteLength;\n        var offset = 2;\n        while (offset < length) {\n          var marker = getUint16(view, offset);\n          offset += 2;\n\n          // There's our APP1 Marker\n          if (marker === Marker.APP1) {\n            if (getUint32(view, offset += 2) !== Marker.EXIF) {\n              // no EXIF info defined\n              break;\n            }\n\n            // Get TIFF Header\n            var little = getUint16(view, offset += 6) === Marker.TIFF;\n            offset += getUint32(view, offset + 4, little);\n            var tags = getUint16(view, offset, little);\n            offset += 2;\n            for (var i = 0; i < tags; i++) {\n              // found the orientation tag\n              if (getUint16(view, offset + i * 12, little) === Marker.Orientation) {\n                resolve(getUint16(view, offset + i * 12 + 8, little));\n                return;\n              }\n            }\n          } else if ((marker & Marker.Unknown) !== Marker.Unknown) {\n            // Invalid\n            break;\n          } else {\n            offset += getUint16(view, offset);\n          }\n        }\n\n        // Nothing found\n        resolve(-1);\n      };\n\n      // we don't need to read the entire file to get the orientation\n      reader.readAsArrayBuffer(file.slice(0, 64 * 1024));\n    });\n  };\n  var IS_BROWSER = function () {\n    return typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  }();\n  var isBrowser = function isBrowser() {\n    return IS_BROWSER;\n  };\n\n  // 2x1 pixel image 90CW rotated with orientation header\n  var testSrc = 'data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=';\n\n  // should correct orientation if is presented in landscape, in which case the browser doesn't autocorrect\n  var shouldCorrect = undefined;\n  var testImage = isBrowser() ? new Image() : {};\n  testImage.onload = function () {\n    return shouldCorrect = testImage.naturalWidth > testImage.naturalHeight;\n  };\n  testImage.src = testSrc;\n  var shouldCorrectImageExifOrientation = function shouldCorrectImageExifOrientation() {\n    return shouldCorrect;\n  };\n\n  /**\n   * Read Image Orientation Plugin\n   */\n  var plugin = function plugin(_ref) {\n    var addFilter = _ref.addFilter,\n      utils = _ref.utils;\n    var Type = utils.Type,\n      isFile = utils.isFile;\n\n    // subscribe to file load and append required info\n    addFilter('DID_LOAD_ITEM', function (item, _ref2) {\n      var query = _ref2.query;\n      return new Promise(function (resolve, reject) {\n        // get file reference\n        var file = item.file;\n\n        // if this is not a jpeg image we are not interested\n        if (!isFile(file) || !isJPEG(file) || !query('GET_ALLOW_IMAGE_EXIF_ORIENTATION') || !shouldCorrectImageExifOrientation()) {\n          // continue with the unaltered dataset\n          return resolve(item);\n        }\n\n        // get orientation from exif data\n        getImageOrientation(file).then(function (orientation) {\n          item.setMetadata('exif', {\n            orientation: orientation\n          });\n          resolve(item);\n        });\n      });\n    });\n\n    // Expose plugin options\n    return {\n      options: {\n        // Enable or disable image orientation reading\n        allowImageExifOrientation: [true, Type.BOOLEAN]\n      }\n    };\n  };\n\n  // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n  var isBrowser$1 = typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  if (isBrowser$1) {\n    document.dispatchEvent(new CustomEvent('FilePond:pluginloaded', {\n      detail: plugin\n    }));\n  }\n  return plugin;\n});","map":{"version":3,"names":["global","factory","exports","module","define","amd","self","FilePondPluginImageExifOrientation","isJPEG","file","test","type","Marker","JPEG","APP1","EXIF","TIFF","Orientation","Unknown","getUint16","view","offset","little","arguments","length","undefined","getUint32","getImageOrientation","Promise","resolve","reject","reader","FileReader","onload","e","DataView","target","result","byteLength","marker","tags","i","readAsArrayBuffer","slice","IS_BROWSER","window","document","isBrowser","testSrc","shouldCorrect","testImage","Image","naturalWidth","naturalHeight","src","shouldCorrectImageExifOrientation","plugin","_ref","addFilter","utils","Type","isFile","item","_ref2","query","then","orientation","setMetadata","options","allowImageExifOrientation","BOOLEAN","isBrowser$1","dispatchEvent","CustomEvent","detail"],"sources":["/Users/marija/Documents/GitHub/marija_cv_website/node_modules/filepond-plugin-image-exif-orientation/dist/filepond-plugin-image-exif-orientation.js"],"sourcesContent":["/*!\n * FilePondPluginImageExifOrientation 1.0.11\n * Licensed under MIT, https://opensource.org/licenses/MIT/\n * Please visit https://pqina.nl/filepond/ for details.\n */\n\n/* eslint-disable */\n\n(function(global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined'\n    ? (module.exports = factory())\n    : typeof define === 'function' && define.amd\n    ? define(factory)\n    : ((global = global || self),\n      (global.FilePondPluginImageExifOrientation = factory()));\n})(this, function() {\n  'use strict';\n\n  // test if file is of type image\n  var isJPEG = function isJPEG(file) {\n    return /^image\\/jpeg/.test(file.type);\n  };\n\n  var Marker = {\n    JPEG: 0xffd8,\n    APP1: 0xffe1,\n    EXIF: 0x45786966,\n    TIFF: 0x4949,\n    Orientation: 0x0112,\n    Unknown: 0xff00\n  };\n\n  var getUint16 = function getUint16(view, offset) {\n    var little =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    return view.getUint16(offset, little);\n  };\n  var getUint32 = function getUint32(view, offset) {\n    var little =\n      arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    return view.getUint32(offset, little);\n  };\n\n  var getImageOrientation = function getImageOrientation(file) {\n    return new Promise(function(resolve, reject) {\n      var reader = new FileReader();\n      reader.onload = function(e) {\n        var view = new DataView(e.target.result);\n\n        // Every JPEG file starts from binary value '0xFFD8'\n        if (getUint16(view, 0) !== Marker.JPEG) {\n          // This aint no JPEG\n          resolve(-1);\n          return;\n        }\n\n        var length = view.byteLength;\n        var offset = 2;\n\n        while (offset < length) {\n          var marker = getUint16(view, offset);\n          offset += 2;\n\n          // There's our APP1 Marker\n          if (marker === Marker.APP1) {\n            if (getUint32(view, (offset += 2)) !== Marker.EXIF) {\n              // no EXIF info defined\n              break;\n            }\n\n            // Get TIFF Header\n            var little = getUint16(view, (offset += 6)) === Marker.TIFF;\n            offset += getUint32(view, offset + 4, little);\n\n            var tags = getUint16(view, offset, little);\n            offset += 2;\n\n            for (var i = 0; i < tags; i++) {\n              // found the orientation tag\n              if (\n                getUint16(view, offset + i * 12, little) === Marker.Orientation\n              ) {\n                resolve(getUint16(view, offset + i * 12 + 8, little));\n\n                return;\n              }\n            }\n          } else if ((marker & Marker.Unknown) !== Marker.Unknown) {\n            // Invalid\n            break;\n          } else {\n            offset += getUint16(view, offset);\n          }\n        }\n\n        // Nothing found\n        resolve(-1);\n      };\n\n      // we don't need to read the entire file to get the orientation\n      reader.readAsArrayBuffer(file.slice(0, 64 * 1024));\n    });\n  };\n\n  var IS_BROWSER = (function() {\n    return (\n      typeof window !== 'undefined' && typeof window.document !== 'undefined'\n    );\n  })();\n  var isBrowser = function isBrowser() {\n    return IS_BROWSER;\n  };\n\n  // 2x1 pixel image 90CW rotated with orientation header\n  var testSrc =\n    'data:image/jpg;base64,/9j/4AAQSkZJRgABAQEASABIAAD/4QA6RXhpZgAATU0AKgAAAAgAAwESAAMAAAABAAYAAAEoAAMAAAABAAIAAAITAAMAAAABAAEAAAAAAAD/2wBDAP//////////////////////////////////////////////////////////////////////////////////////wAALCAABAAIBASIA/8QAJgABAAAAAAAAAAAAAAAAAAAAAxABAAAAAAAAAAAAAAAAAAAAAP/aAAgBAQAAPwBH/9k=';\n\n  // should correct orientation if is presented in landscape, in which case the browser doesn't autocorrect\n  var shouldCorrect = undefined;\n  var testImage = isBrowser() ? new Image() : {};\n  testImage.onload = function() {\n    return (shouldCorrect = testImage.naturalWidth > testImage.naturalHeight);\n  };\n  testImage.src = testSrc;\n\n  var shouldCorrectImageExifOrientation = function shouldCorrectImageExifOrientation() {\n    return shouldCorrect;\n  };\n\n  /**\n   * Read Image Orientation Plugin\n   */\n  var plugin = function plugin(_ref) {\n    var addFilter = _ref.addFilter,\n      utils = _ref.utils;\n    var Type = utils.Type,\n      isFile = utils.isFile;\n\n    // subscribe to file load and append required info\n    addFilter('DID_LOAD_ITEM', function(item, _ref2) {\n      var query = _ref2.query;\n      return new Promise(function(resolve, reject) {\n        // get file reference\n        var file = item.file;\n\n        // if this is not a jpeg image we are not interested\n        if (\n          !isFile(file) ||\n          !isJPEG(file) ||\n          !query('GET_ALLOW_IMAGE_EXIF_ORIENTATION') ||\n          !shouldCorrectImageExifOrientation()\n        ) {\n          // continue with the unaltered dataset\n          return resolve(item);\n        }\n\n        // get orientation from exif data\n        getImageOrientation(file).then(function(orientation) {\n          item.setMetadata('exif', { orientation: orientation });\n          resolve(item);\n        });\n      });\n    });\n\n    // Expose plugin options\n    return {\n      options: {\n        // Enable or disable image orientation reading\n        allowImageExifOrientation: [true, Type.BOOLEAN]\n      }\n    };\n  };\n\n  // fire pluginloaded event if running in browser, this allows registering the plugin when using async script tags\n  var isBrowser$1 =\n    typeof window !== 'undefined' && typeof window.document !== 'undefined';\n  if (isBrowser$1) {\n    document.dispatchEvent(\n      new CustomEvent('FilePond:pluginloaded', { detail: plugin })\n    );\n  }\n\n  return plugin;\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}